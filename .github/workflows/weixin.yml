name: weixin
on:
  workflow_dispatch:
  schedule: 
    # 代表国际标准时间4点0分，北京时间需要+8小时，代表北京时间中午12点运行
    - cron: '0 0 * * *'
jobs:
#将工作流程中运行的所有作业组合在一起
  build:
  #定义名为 build 的作业。 子键将定义作业的属性 
    runs-on: ubuntu-latest 
    steps:
      - uses: actions/checkout@v2
    
      - name: Set up Python 3.9
        uses: actions/setup-python@v2
        with:
          python-version: 3.9.1
      - name: install pip packages
        run: |
          python -m pip install --upgrade pip
          pip3 install -r requirements.txt
          pip3 install bs4
      - name: weixin
        run: |
          python3 main.py
      - name: Deploy
        uses: s0/git-publish-subdir-action@develop
        env:
              REPO: self
              BRANCH: gh
              FOLDER: post
              GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      - name: Deploy
        uses: s0/git-publish-subdir-action@develop
        env:
              REPO: git@github.com:ysfhtxn/blog.git
              BRANCH: gh-pages
              FOLDER: build
              SSH_PRIVATE_KEY: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC3eIvwJnf1PxfxJAzTczdqd7M/pZQeyS86JASHrbZWvoZQMfhdd4afWfMShydA+GEwR+th77puzrj36lMV4Jzqq0BkPuvXJ3oY4mBQMFQEj5euSziEEz/RV2HUr/A0CU5Urkb0EZAdfEW0vrhh/+o0b4kxCmGmGvrQCH2mN2vNwbpoZqwzrCKCcKkWwqxDyoyykDhKivpN9TBstl43yZdfMrM3PdMwNJuNMF82z81q4kY0aeyR3cJspxeWhKbGMTmq3TEtnCkxNfZPwsJI+6EfwLBD2CHmO2XQcu7/FM0PAefoLqxKflb2AbEaETk7QAnWAdor2+v+TIdf6fQ6s1MrPJRLyjGqjJQgUFq+ywlYZLirvm2tn6RAeTMXqBa5s97mJE8J6+o4kmm1JhZ3WGRKvNMDew/vLK3sGZhAcbRP/BmWwoEtRJMeNJPAE3UiDHzfyBgts4V7KL5zEskrkz8vZ1mOOOESHOuF3NcMvBUXlncxLxI5WPYPIS6sWG15t5E= 1121656712@qq.com

